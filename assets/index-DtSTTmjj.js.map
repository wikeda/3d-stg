{"version":3,"file":"index-DtSTTmjj.js","sources":["../../src/scene/SceneManager.ts","../../src/scene/Background.ts","../../src/input/InputManager.ts","../../src/game/Player.ts","../../src/game/Bullet.ts","../../src/game/Enemy.ts","../../src/game/EnemyTypeA.ts","../../src/game/EnemyTypeB.ts","../../src/game/EnemyTypeC.ts","../../src/game/Obstacle.ts","../../src/utils/CollisionDetector.ts","../../src/ui/HUD.ts","../../src/ui/GameOverScreen.ts","../../src/game/Game.ts","../../src/main.ts"],"sourcesContent":["import * as THREE from 'three'\r\n\r\nexport class SceneManager {\r\n  private scene: THREE.Scene\r\n  private camera: THREE.PerspectiveCamera\r\n  private renderer: THREE.WebGLRenderer\r\n\r\n  constructor() {\r\n    this.scene = new THREE.Scene()\r\n    this.camera = this.createCamera()\r\n    this.renderer = this.createRenderer()\r\n    this.setupLights()\r\n    this.handleResize()\r\n  }\r\n\r\n  private createCamera(): THREE.PerspectiveCamera {\r\n    const camera = new THREE.PerspectiveCamera(\r\n      75,\r\n      window.innerWidth / window.innerHeight,\r\n      0.1,\r\n      1000\r\n    )\r\n    camera.position.set(0, 5, 10)\r\n    camera.lookAt(0, 0, -50)\r\n    return camera\r\n  }\r\n\r\n  private createRenderer(): THREE.WebGLRenderer {\r\n    const renderer = new THREE.WebGLRenderer({ antialias: true })\r\n    renderer.setSize(window.innerWidth, window.innerHeight)\r\n    renderer.setPixelRatio(window.devicePixelRatio)\r\n    renderer.shadowMap.enabled = true\r\n    renderer.shadowMap.type = THREE.PCFSoftShadowMap\r\n    const container = document.getElementById('game-container')\r\n    if (container) {\r\n      container.appendChild(renderer.domElement)\r\n    }\r\n    return renderer\r\n  }\r\n\r\n  private setupLights(): void {\r\n    const ambientLight = new THREE.AmbientLight(0xffffff, 0.6)\r\n    const directionalLight = new THREE.DirectionalLight(0xffffff, 0.8)\r\n    directionalLight.position.set(10, 20, 10)\r\n    directionalLight.castShadow = true\r\n\r\n    // Shadow camera settings\r\n    directionalLight.shadow.camera.left = -50\r\n    directionalLight.shadow.camera.right = 50\r\n    directionalLight.shadow.camera.top = 50\r\n    directionalLight.shadow.camera.bottom = -50\r\n    directionalLight.shadow.camera.near = 0.5\r\n    directionalLight.shadow.camera.far = 500\r\n    directionalLight.shadow.mapSize.width = 2048\r\n    directionalLight.shadow.mapSize.height = 2048\r\n\r\n    this.scene.add(ambientLight, directionalLight)\r\n  }\r\n\r\n  private handleResize(): void {\r\n    window.addEventListener('resize', () => {\r\n      this.camera.aspect = window.innerWidth / window.innerHeight\r\n      this.camera.updateProjectionMatrix()\r\n      this.renderer.setSize(window.innerWidth, window.innerHeight)\r\n    })\r\n  }\r\n\r\n  getScene(): THREE.Scene {\r\n    return this.scene\r\n  }\r\n\r\n  getCamera(): THREE.PerspectiveCamera {\r\n    return this.camera\r\n  }\r\n\r\n  getRenderer(): THREE.WebGLRenderer {\r\n    return this.renderer\r\n  }\r\n\r\n  render(): void {\r\n    this.renderer.render(this.scene, this.camera)\r\n  }\r\n}\r\n","import * as THREE from 'three'\r\n\r\nexport class Background {\r\n  private ground: THREE.Mesh\r\n  private stars: THREE.Points\r\n  private scrollSpeed: number = 0.5\r\n\r\n  constructor(scene: THREE.Scene) {\r\n    this.ground = this.createGround()\r\n    this.stars = this.createStars()\r\n    scene.add(this.ground, this.stars)\r\n  }\r\n\r\n  private createGround(): THREE.Mesh {\r\n    const geometry = new THREE.PlaneGeometry(100, 500, 10, 50)\r\n\r\n    // Create checkerboard texture\r\n    const canvas = document.createElement('canvas')\r\n    canvas.width = 256\r\n    canvas.height = 256\r\n    const ctx = canvas.getContext('2d')!\r\n    const tileSize = 32\r\n\r\n    for (let y = 0; y < 256; y += tileSize) {\r\n      for (let x = 0; x < 256; x += tileSize) {\r\n        ctx.fillStyle = ((x / tileSize) + (y / tileSize)) % 2 === 0 ? '#00ff00' : '#00aa00'\r\n        ctx.fillRect(x, y, tileSize, tileSize)\r\n      }\r\n    }\r\n\r\n    const texture = new THREE.CanvasTexture(canvas)\r\n    texture.wrapS = THREE.RepeatWrapping\r\n    texture.wrapT = THREE.RepeatWrapping\r\n    texture.repeat.set(5, 25)\r\n\r\n    const material = new THREE.MeshStandardMaterial({\r\n      map: texture,\r\n      side: THREE.DoubleSide\r\n    })\r\n\r\n    const ground = new THREE.Mesh(geometry, material)\r\n    ground.rotation.x = -Math.PI / 2\r\n    ground.position.y = -5\r\n    ground.position.z = -250\r\n    ground.receiveShadow = true\r\n\r\n    return ground\r\n  }\r\n\r\n  private createStars(): THREE.Points {\r\n    const geometry = new THREE.BufferGeometry()\r\n    const vertices: number[] = []\r\n\r\n    for (let i = 0; i < 1000; i++) {\r\n      vertices.push(\r\n        THREE.MathUtils.randFloatSpread(200),\r\n        THREE.MathUtils.randFloat(10, 50), // Changed from 0 to 10 to avoid ground clipping\r\n        THREE.MathUtils.randFloatSpread(500)\r\n      )\r\n    }\r\n\r\n    geometry.setAttribute('position', new THREE.Float32BufferAttribute(vertices, 3))\r\n    const material = new THREE.PointsMaterial({ color: 0xffffff, size: 0.5 })\r\n\r\n    return new THREE.Points(geometry, material)\r\n  }\r\n\r\n  update(deltaTime: number): void {\r\n    // Ground scrolling (positive to move towards player)\r\n    const material = this.ground.material as THREE.MeshStandardMaterial\r\n    if (material.map) {\r\n      material.map.offset.y += this.scrollSpeed * deltaTime\r\n    }\r\n  }\r\n}\r\n","export interface InputState {\r\n  moveX: number  // -1 to 1\r\n  moveY: number  // -1 to 1\r\n  shoot: boolean\r\n}\r\n\r\nexport class InputManager {\r\n  private keys: Set<string> = new Set()\r\n  private mousePos: { x: number; y: number } = { x: 0, y: 0 }\r\n  private mouseDown: boolean = false\r\n  private touchPos: { x: number; y: number } | null = null\r\n  private inputMode: 'keyboard' | 'mouse' | 'touch' = 'keyboard'\r\n\r\n  constructor() {\r\n    this.setupEventListeners()\r\n  }\r\n\r\n  private setupEventListeners(): void {\r\n    // Keyboard\r\n    window.addEventListener('keydown', (e) => this.keys.add(e.key))\r\n    window.addEventListener('keyup', (e) => this.keys.delete(e.key))\r\n\r\n    // Mouse\r\n    window.addEventListener('mousemove', (e) => {\r\n      this.inputMode = 'mouse'\r\n      this.mousePos.x = (e.clientX / window.innerWidth) * 2 - 1\r\n      this.mousePos.y = -(e.clientY / window.innerHeight) * 2 + 1\r\n    })\r\n    window.addEventListener('mousedown', () => this.mouseDown = true)\r\n    window.addEventListener('mouseup', () => this.mouseDown = false)\r\n\r\n    // Touch\r\n    window.addEventListener('touchstart', (e) => {\r\n      this.inputMode = 'touch'\r\n      const touch = e.touches[0]\r\n      this.touchPos = {\r\n        x: (touch.clientX / window.innerWidth) * 2 - 1,\r\n        y: -(touch.clientY / window.innerHeight) * 2 + 1\r\n      }\r\n    })\r\n    window.addEventListener('touchmove', (e) => {\r\n      const touch = e.touches[0]\r\n      this.touchPos = {\r\n        x: (touch.clientX / window.innerWidth) * 2 - 1,\r\n        y: -(touch.clientY / window.innerHeight) * 2 + 1\r\n      }\r\n    })\r\n    window.addEventListener('touchend', () => this.touchPos = null)\r\n  }\r\n\r\n  getInputState(): InputState {\r\n    const state: InputState = { moveX: 0, moveY: 0, shoot: false }\r\n\r\n    if (this.inputMode === 'keyboard') {\r\n      if (this.keys.has('ArrowLeft') || this.keys.has('a') || this.keys.has('A')) state.moveX -= 1\r\n      if (this.keys.has('ArrowRight') || this.keys.has('d') || this.keys.has('D')) state.moveX += 1\r\n      if (this.keys.has('ArrowUp') || this.keys.has('w') || this.keys.has('W')) state.moveY += 1\r\n      if (this.keys.has('ArrowDown') || this.keys.has('s') || this.keys.has('S')) state.moveY -= 1\r\n      if (this.keys.has(' ')) state.shoot = true\r\n    } else if (this.inputMode === 'mouse') {\r\n      state.moveX = this.mousePos.x\r\n      state.moveY = this.mousePos.y\r\n      state.shoot = this.mouseDown\r\n    } else if (this.inputMode === 'touch' && this.touchPos) {\r\n      state.moveX = this.touchPos.x\r\n      state.moveY = this.touchPos.y\r\n      state.shoot = true\r\n    }\r\n\r\n    return state\r\n  }\r\n}\r\n","import * as THREE from 'three'\r\nimport { InputState } from '../input/InputManager'\r\n\r\nexport class Player {\r\n  private mesh: THREE.Mesh\r\n  private hp: number = 5\r\n  private maxHp: number = 5\r\n  private speed: number = 15\r\n  private bounds = { x: 12, y: 8 }\r\n  private invincible: boolean = false\r\n  private invincibleTime: number = 0\r\n  private shootCooldown: number = 0\r\n  private shootInterval: number = 0.15 // seconds between shots\r\n\r\n  constructor(scene: THREE.Scene) {\r\n    this.mesh = this.createMesh()\r\n    scene.add(this.mesh)\r\n  }\r\n\r\n  private createMesh(): THREE.Mesh {\r\n    const geometry = new THREE.ConeGeometry(0.5, 1.5, 3)\r\n    const material = new THREE.MeshStandardMaterial({\r\n      color: 0x00ffff,\r\n      flatShading: true,\r\n      transparent: true,\r\n      opacity: 1\r\n    })\r\n    const mesh = new THREE.Mesh(geometry, material)\r\n    mesh.rotation.x = Math.PI / 2\r\n    mesh.position.set(0, 0, 0)\r\n    mesh.castShadow = true\r\n    return mesh\r\n  }\r\n\r\n  update(deltaTime: number, input: InputState): void {\r\n    // Movement\r\n    if (input.moveX !== 0 || input.moveY !== 0) {\r\n      const targetX = input.moveX * this.bounds.x\r\n      const targetY = input.moveY * this.bounds.y\r\n\r\n      this.mesh.position.x += (targetX - this.mesh.position.x) * this.speed * deltaTime\r\n      this.mesh.position.y += (targetY - this.mesh.position.y) * this.speed * deltaTime\r\n    }\r\n\r\n    // Boundary limits\r\n    this.mesh.position.x = THREE.MathUtils.clamp(this.mesh.position.x, -this.bounds.x, this.bounds.x)\r\n    this.mesh.position.y = THREE.MathUtils.clamp(this.mesh.position.y, -this.bounds.y, this.bounds.y)\r\n\r\n    // Invincibility update\r\n    if (this.invincible) {\r\n      this.invincibleTime -= deltaTime\r\n      if (this.invincibleTime <= 0) {\r\n        this.invincible = false\r\n        const material = this.mesh.material as THREE.MeshStandardMaterial\r\n        material.opacity = 1\r\n      } else {\r\n        // Blinking effect\r\n        const material = this.mesh.material as THREE.MeshStandardMaterial\r\n        material.opacity = Math.sin(this.invincibleTime * 20) * 0.5 + 0.5\r\n      }\r\n    }\r\n\r\n    // Shoot cooldown\r\n    if (this.shootCooldown > 0) {\r\n      this.shootCooldown -= deltaTime\r\n    }\r\n  }\r\n\r\n  canShoot(): boolean {\r\n    return this.shootCooldown <= 0\r\n  }\r\n\r\n  resetShootCooldown(): void {\r\n    this.shootCooldown = this.shootInterval\r\n  }\r\n\r\n  takeDamage(amount: number): boolean {\r\n    if (this.invincible) return false\r\n\r\n    this.hp -= amount\r\n    if (this.hp <= 0) {\r\n      this.hp = 0\r\n      return true // Game over\r\n    }\r\n\r\n    // Start invincibility\r\n    this.invincible = true\r\n    this.invincibleTime = 2.0 // 2 seconds invincible\r\n\r\n    return false\r\n  }\r\n\r\n  heal(amount: number): void {\r\n    this.hp = Math.min(this.hp + amount, this.maxHp)\r\n  }\r\n\r\n  getPosition(): THREE.Vector3 {\r\n    return this.mesh.position.clone()\r\n  }\r\n\r\n  getMesh(): THREE.Mesh {\r\n    return this.mesh\r\n  }\r\n\r\n  getHP(): number {\r\n    return this.hp\r\n  }\r\n\r\n  getMaxHP(): number {\r\n    return this.maxHp\r\n  }\r\n}\r\n","import * as THREE from 'three'\r\n\r\nexport class Bullet {\r\n  private mesh: THREE.Mesh\r\n  private speed: number = 80\r\n  private lifetime: number = 3.0\r\n  private age: number = 0\r\n  public active: boolean = true\r\n\r\n  constructor(scene: THREE.Scene, position: THREE.Vector3) {\r\n    this.mesh = this.createMesh()\r\n    this.mesh.position.copy(position)\r\n    scene.add(this.mesh)\r\n  }\r\n\r\n  private createMesh(): THREE.Mesh {\r\n    const geometry = new THREE.SphereGeometry(0.2, 8, 8)\r\n    const material = new THREE.MeshBasicMaterial({ color: 0xffff00 })\r\n    return new THREE.Mesh(geometry, material)\r\n  }\r\n\r\n  update(deltaTime: number): void {\r\n    this.mesh.position.z -= this.speed * deltaTime\r\n    this.age += deltaTime\r\n\r\n    if (this.age >= this.lifetime || this.mesh.position.z < -300) {\r\n      this.active = false\r\n    }\r\n  }\r\n\r\n  getPosition(): THREE.Vector3 {\r\n    return this.mesh.position.clone()\r\n  }\r\n\r\n  getMesh(): THREE.Mesh {\r\n    return this.mesh\r\n  }\r\n\r\n  destroy(scene: THREE.Scene): void {\r\n    scene.remove(this.mesh)\r\n    this.mesh.geometry.dispose()\r\n    const material = this.mesh.material\r\n    if (material instanceof THREE.Material) {\r\n      material.dispose()\r\n    }\r\n  }\r\n}\r\n","import * as THREE from 'three'\r\n\r\nexport abstract class Enemy {\r\n  protected mesh: THREE.Mesh\r\n  protected hp: number\r\n  protected maxHp: number\r\n  protected speed: number = 20\r\n  public active: boolean = true\r\n\r\n  constructor(scene: THREE.Scene, position: THREE.Vector3, hp: number) {\r\n    this.hp = hp\r\n    this.maxHp = hp\r\n    this.mesh = this.createMesh()\r\n    this.mesh.position.copy(position)\r\n    scene.add(this.mesh)\r\n  }\r\n\r\n  protected abstract createMesh(): THREE.Mesh\r\n\r\n  abstract update(deltaTime: number, playerPos: THREE.Vector3): void\r\n\r\n  takeDamage(amount: number): boolean {\r\n    this.hp -= amount\r\n    if (this.hp <= 0) {\r\n      this.active = false\r\n      return true // Destroyed\r\n    }\r\n    return false\r\n  }\r\n\r\n  getPosition(): THREE.Vector3 {\r\n    return this.mesh.position.clone()\r\n  }\r\n\r\n  getMesh(): THREE.Mesh {\r\n    return this.mesh\r\n  }\r\n\r\n  destroy(scene: THREE.Scene): void {\r\n    scene.remove(this.mesh)\r\n    this.mesh.geometry.dispose()\r\n    const material = this.mesh.material\r\n    if (material instanceof THREE.Material) {\r\n      material.dispose()\r\n    }\r\n  }\r\n}\r\n","import * as THREE from 'three'\r\nimport { Enemy } from './Enemy'\r\n\r\nexport class EnemyTypeA extends Enemy {\r\n  constructor(scene: THREE.Scene, position: THREE.Vector3) {\r\n    super(scene, position, 1)\r\n  }\r\n\r\n  protected createMesh(): THREE.Mesh {\r\n    const geometry = new THREE.TetrahedronGeometry(0.8)\r\n    const material = new THREE.MeshStandardMaterial({\r\n      color: 0xff0000,\r\n      flatShading: true\r\n    })\r\n    const mesh = new THREE.Mesh(geometry, material)\r\n    mesh.castShadow = true\r\n    return mesh\r\n  }\r\n\r\n  update(deltaTime: number, playerPos: THREE.Vector3): void {\r\n    // Straight movement towards player\r\n    this.mesh.position.z += this.speed * deltaTime\r\n\r\n    if (this.mesh.position.z > 20) {\r\n      this.active = false\r\n    }\r\n\r\n    this.mesh.rotation.y += deltaTime * 2\r\n  }\r\n}\r\n","import * as THREE from 'three'\r\nimport { Enemy } from './Enemy'\r\n\r\nexport class EnemyTypeB extends Enemy {\r\n  private timeAlive: number = 0\r\n\r\n  constructor(scene: THREE.Scene, position: THREE.Vector3) {\r\n    super(scene, position, 2)\r\n  }\r\n\r\n  protected createMesh(): THREE.Mesh {\r\n    const geometry = new THREE.OctahedronGeometry(0.9)\r\n    const material = new THREE.MeshStandardMaterial({\r\n      color: 0xff6600,\r\n      flatShading: true\r\n    })\r\n    const mesh = new THREE.Mesh(geometry, material)\r\n    mesh.castShadow = true\r\n    return mesh\r\n  }\r\n\r\n  update(deltaTime: number, playerPos: THREE.Vector3): void {\r\n    this.timeAlive += deltaTime\r\n\r\n    // Sine wave movement (left-right)\r\n    const amplitude = 5\r\n    const frequency = 2\r\n    this.mesh.position.x = Math.sin(this.timeAlive * frequency) * amplitude\r\n\r\n    // Move forward\r\n    this.mesh.position.z += this.speed * deltaTime\r\n\r\n    if (this.mesh.position.z > 20) {\r\n      this.active = false\r\n    }\r\n\r\n    this.mesh.rotation.x += deltaTime * 2\r\n    this.mesh.rotation.y += deltaTime * 2\r\n  }\r\n}\r\n","import * as THREE from 'three'\r\nimport { Enemy } from './Enemy'\r\n\r\nexport class EnemyTypeC extends Enemy {\r\n  private trackingSpeed: number = 3\r\n  private timeAlive: number = 0\r\n  private initialX: number\r\n  private zigzagAmplitude: number = 8\r\n  private zigzagFrequency: number = 1.5\r\n\r\n  constructor(scene: THREE.Scene, position: THREE.Vector3) {\r\n    super(scene, position, 3)\r\n    this.initialX = position.x\r\n  }\r\n\r\n  protected createMesh(): THREE.Mesh {\r\n    const geometry = new THREE.DodecahedronGeometry(1)\r\n    const material = new THREE.MeshStandardMaterial({\r\n      color: 0xff00ff,\r\n      flatShading: true\r\n    })\r\n    const mesh = new THREE.Mesh(geometry, material)\r\n    mesh.castShadow = true\r\n    return mesh\r\n  }\r\n\r\n  update(deltaTime: number, playerPos: THREE.Vector3): void {\r\n    this.timeAlive += deltaTime\r\n\r\n    // Zigzag pattern combined with gentle player tracking\r\n    const zigzagOffset = Math.sin(this.timeAlive * this.zigzagFrequency) * this.zigzagAmplitude\r\n    const targetX = this.initialX + zigzagOffset + (playerPos.x - this.mesh.position.x) * 0.2\r\n\r\n    // Slow tracking towards player Y position\r\n    const targetY = playerPos.y\r\n\r\n    this.mesh.position.x += (targetX - this.mesh.position.x) * this.trackingSpeed * deltaTime\r\n    this.mesh.position.y += (targetY - this.mesh.position.y) * this.trackingSpeed * deltaTime * 0.5\r\n\r\n    // Move forward\r\n    this.mesh.position.z += this.speed * deltaTime\r\n\r\n    if (this.mesh.position.z > 20) {\r\n      this.active = false\r\n    }\r\n\r\n    this.mesh.rotation.x += deltaTime * 3\r\n    this.mesh.rotation.y += deltaTime * 3\r\n    this.mesh.rotation.z += deltaTime * 3\r\n  }\r\n}\r\n","import * as THREE from 'three'\r\n\r\nexport class Obstacle {\r\n  private mesh: THREE.Mesh\r\n  private speed: number = 20\r\n  public active: boolean = true\r\n\r\n  constructor(scene: THREE.Scene, position: THREE.Vector3, type: 'rock' | 'pillar' = 'rock') {\r\n    this.mesh = this.createMesh(type)\r\n    this.mesh.position.copy(position)\r\n    scene.add(this.mesh)\r\n  }\r\n\r\n  private createMesh(type: 'rock' | 'pillar'): THREE.Mesh {\r\n    let geometry: THREE.BufferGeometry\r\n\r\n    if (type === 'rock') {\r\n      geometry = new THREE.DodecahedronGeometry(1.5)\r\n    } else {\r\n      geometry = new THREE.CylinderGeometry(0.5, 0.5, 3, 6)\r\n    }\r\n\r\n    const material = new THREE.MeshStandardMaterial({\r\n      color: 0x808080,\r\n      flatShading: true\r\n    })\r\n\r\n    const mesh = new THREE.Mesh(geometry, material)\r\n    mesh.castShadow = true\r\n    return mesh\r\n  }\r\n\r\n  update(deltaTime: number): void {\r\n    // Move forward\r\n    this.mesh.position.z += this.speed * deltaTime\r\n\r\n    if (this.mesh.position.z > 20) {\r\n      this.active = false\r\n    }\r\n\r\n    // Slow rotation\r\n    this.mesh.rotation.y += deltaTime * 0.5\r\n  }\r\n\r\n  getPosition(): THREE.Vector3 {\r\n    return this.mesh.position.clone()\r\n  }\r\n\r\n  getMesh(): THREE.Mesh {\r\n    return this.mesh\r\n  }\r\n\r\n  destroy(scene: THREE.Scene): void {\r\n    scene.remove(this.mesh)\r\n    this.mesh.geometry.dispose()\r\n    const material = this.mesh.material\r\n    if (material instanceof THREE.Material) {\r\n      material.dispose()\r\n    }\r\n  }\r\n}\r\n","import * as THREE from 'three'\r\n\r\nexport class CollisionDetector {\r\n  checkSphereCollision(\r\n    pos1: THREE.Vector3,\r\n    radius1: number,\r\n    pos2: THREE.Vector3,\r\n    radius2: number\r\n  ): boolean {\r\n    const distance = pos1.distanceTo(pos2)\r\n    return distance <= (radius1 + radius2)\r\n  }\r\n\r\n  checkBulletEnemyCollisions(bullets: any[], enemies: any[]): void {\r\n    for (const bullet of bullets) {\r\n      if (!bullet.active) continue\r\n\r\n      for (const enemy of enemies) {\r\n        if (!enemy.active) continue\r\n\r\n        if (this.checkSphereCollision(bullet.getPosition(), 0.2, enemy.getPosition(), 1)) {\r\n          bullet.active = false\r\n          enemy.takeDamage(1)\r\n          break\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  checkPlayerEnemyCollisions(playerPos: THREE.Vector3, enemies: any[]): boolean {\r\n    for (const enemy of enemies) {\r\n      if (!enemy.active) continue\r\n\r\n      if (this.checkSphereCollision(playerPos, 0.5, enemy.getPosition(), 1)) {\r\n        return true\r\n      }\r\n    }\r\n    return false\r\n  }\r\n\r\n  checkPlayerObstacleCollisions(playerPos: THREE.Vector3, obstacles: any[]): boolean {\r\n    for (const obstacle of obstacles) {\r\n      if (!obstacle.active) continue\r\n\r\n      if (this.checkSphereCollision(playerPos, 0.5, obstacle.getPosition(), 1)) {\r\n        return true\r\n      }\r\n    }\r\n    return false\r\n  }\r\n}\r\n","export class HUD {\r\n  private hpDisplay: HTMLElement\r\n  private stageDisplay: HTMLElement\r\n  private scoreDisplay: HTMLElement\r\n\r\n  constructor() {\r\n    this.hpDisplay = document.getElementById('hp-display')!\r\n    this.stageDisplay = document.getElementById('stage-display')!\r\n    this.scoreDisplay = document.getElementById('score-display')!\r\n  }\r\n\r\n  updateHP(hp: number): void {\r\n    this.hpDisplay.textContent = `HP: ${hp}`\r\n  }\r\n\r\n  updateStage(stage: number): void {\r\n    this.stageDisplay.textContent = `STAGE ${stage}`\r\n  }\r\n\r\n  updateScore(score: number): void {\r\n    this.scoreDisplay.textContent = `SCORE: ${score}`\r\n  }\r\n\r\n  show(): void {\r\n    const hud = document.getElementById('hud')\r\n    if (hud) {\r\n      hud.style.display = 'block'\r\n    }\r\n  }\r\n\r\n  hide(): void {\r\n    const hud = document.getElementById('hud')\r\n    if (hud) {\r\n      hud.style.display = 'none'\r\n    }\r\n  }\r\n}\r\n","export class GameOverScreen {\r\n  private screen: HTMLElement\r\n  private finalScoreElement: HTMLElement\r\n  private finalStageElement: HTMLElement\r\n  private retryButton: HTMLElement\r\n\r\n  constructor(onRetry: () => void) {\r\n    this.screen = document.getElementById('game-over-screen')!\r\n    this.finalScoreElement = document.getElementById('final-score')!\r\n    this.finalStageElement = document.getElementById('final-stage')!\r\n    this.retryButton = document.getElementById('retry-button')!\r\n\r\n    this.retryButton.addEventListener('click', () => {\r\n      this.hide()\r\n      onRetry()\r\n    })\r\n  }\r\n\r\n  show(score: number, stage: number): void {\r\n    this.finalScoreElement.textContent = score.toString()\r\n    this.finalStageElement.textContent = stage.toString()\r\n    this.screen.style.display = 'block'\r\n  }\r\n\r\n  hide(): void {\r\n    this.screen.style.display = 'none'\r\n  }\r\n}\r\n","import * as THREE from 'three'\r\nimport { SceneManager } from '../scene/SceneManager'\r\nimport { Background } from '../scene/Background'\r\nimport { InputManager } from '../input/InputManager'\r\nimport { Player } from './Player'\r\nimport { Bullet } from './Bullet'\r\nimport { Enemy } from './Enemy'\r\nimport { EnemyTypeA } from './EnemyTypeA'\r\nimport { EnemyTypeB } from './EnemyTypeB'\r\nimport { EnemyTypeC } from './EnemyTypeC'\r\nimport { Obstacle } from './Obstacle'\r\nimport { CollisionDetector } from '../utils/CollisionDetector'\r\nimport { HUD } from '../ui/HUD'\r\nimport { GameOverScreen } from '../ui/GameOverScreen'\r\n\r\nexport class Game {\r\n  private sceneManager: SceneManager\r\n  private inputManager: InputManager\r\n  private player: Player\r\n  private enemies: Enemy[] = []\r\n  private bullets: Bullet[] = []\r\n  private obstacles: Obstacle[] = []\r\n  private background: Background\r\n  private hud: HUD\r\n  private gameOverScreen: GameOverScreen\r\n  private collisionDetector: CollisionDetector\r\n  private clock: THREE.Clock\r\n  private gameState: 'playing' | 'gameover' = 'playing'\r\n  private currentStage: number = 1\r\n  private score: number = 0\r\n  private maxBullets: number = 5\r\n\r\n  // Enemy spawning\r\n  private enemySpawnTimer: number = 0\r\n  private enemySpawnInterval: number = 2.0 // seconds\r\n  private obstacleSpawnTimer: number = 0\r\n  private obstacleSpawnInterval: number = 4.0\r\n\r\n  constructor() {\r\n    this.sceneManager = new SceneManager()\r\n    this.inputManager = new InputManager()\r\n    this.collisionDetector = new CollisionDetector()\r\n    this.clock = new THREE.Clock()\r\n    this.background = new Background(this.sceneManager.getScene())\r\n    this.player = new Player(this.sceneManager.getScene())\r\n    this.hud = new HUD()\r\n    this.gameOverScreen = new GameOverScreen(() => this.restart())\r\n\r\n    this.hud.show()\r\n    this.gameLoop()\r\n  }\r\n\r\n  private gameLoop = (): void => {\r\n    requestAnimationFrame(this.gameLoop)\r\n\r\n    const deltaTime = this.clock.getDelta()\r\n\r\n    if (this.gameState === 'playing') {\r\n      this.update(deltaTime)\r\n    }\r\n\r\n    this.sceneManager.render()\r\n  }\r\n\r\n  private update(deltaTime: number): void {\r\n    // Update input\r\n    const input = this.inputManager.getInputState()\r\n\r\n    // Update player\r\n    this.player.update(deltaTime, input)\r\n\r\n    // Shooting\r\n    if (input.shoot && this.player.canShoot() && this.bullets.length < this.maxBullets) {\r\n      const bullet = new Bullet(this.sceneManager.getScene(), this.player.getPosition())\r\n      this.bullets.push(bullet)\r\n      this.player.resetShootCooldown()\r\n    }\r\n\r\n    // Update bullets\r\n    for (const bullet of this.bullets) {\r\n      bullet.update(deltaTime)\r\n    }\r\n\r\n    // Remove inactive bullets\r\n    this.bullets = this.bullets.filter(bullet => {\r\n      if (!bullet.active) {\r\n        bullet.destroy(this.sceneManager.getScene())\r\n        return false\r\n      }\r\n      return true\r\n    })\r\n\r\n    // Update enemies\r\n    const playerPos = this.player.getPosition()\r\n    for (const enemy of this.enemies) {\r\n      enemy.update(deltaTime, playerPos)\r\n    }\r\n\r\n    // Remove inactive enemies\r\n    this.enemies = this.enemies.filter(enemy => {\r\n      if (!enemy.active) {\r\n        enemy.destroy(this.sceneManager.getScene())\r\n        this.score += 100 // Add score for destroyed enemy\r\n        this.hud.updateScore(this.score)\r\n        return false\r\n      }\r\n      return true\r\n    })\r\n\r\n    // Update obstacles\r\n    for (const obstacle of this.obstacles) {\r\n      obstacle.update(deltaTime)\r\n    }\r\n\r\n    // Remove inactive obstacles\r\n    this.obstacles = this.obstacles.filter(obstacle => {\r\n      if (!obstacle.active) {\r\n        obstacle.destroy(this.sceneManager.getScene())\r\n        return false\r\n      }\r\n      return true\r\n    })\r\n\r\n    // Update background\r\n    this.background.update(deltaTime)\r\n\r\n    // Collision detection\r\n    this.collisionDetector.checkBulletEnemyCollisions(this.bullets, this.enemies)\r\n\r\n    if (this.collisionDetector.checkPlayerEnemyCollisions(playerPos, this.enemies)) {\r\n      const gameOver = this.player.takeDamage(1)\r\n      this.hud.updateHP(this.player.getHP())\r\n      if (gameOver) {\r\n        this.handleGameOver()\r\n      }\r\n    }\r\n\r\n    if (this.collisionDetector.checkPlayerObstacleCollisions(playerPos, this.obstacles)) {\r\n      const gameOver = this.player.takeDamage(1)\r\n      this.hud.updateHP(this.player.getHP())\r\n      if (gameOver) {\r\n        this.handleGameOver()\r\n      }\r\n    }\r\n\r\n    // Spawn enemies\r\n    this.enemySpawnTimer += deltaTime\r\n    if (this.enemySpawnTimer >= this.enemySpawnInterval) {\r\n      this.spawnEnemy()\r\n      this.enemySpawnTimer = 0\r\n    }\r\n\r\n    // Spawn obstacles\r\n    this.obstacleSpawnTimer += deltaTime\r\n    if (this.obstacleSpawnTimer >= this.obstacleSpawnInterval) {\r\n      this.spawnObstacle()\r\n      this.obstacleSpawnTimer = 0\r\n    }\r\n  }\r\n\r\n  private spawnEnemy(): void {\r\n    const x = THREE.MathUtils.randFloat(-10, 10)\r\n    const y = THREE.MathUtils.randFloat(-5, 5)\r\n    const z = -100\r\n\r\n    const enemyType = Math.floor(Math.random() * 3)\r\n    let enemy: Enemy\r\n\r\n    switch (enemyType) {\r\n      case 0:\r\n        enemy = new EnemyTypeA(this.sceneManager.getScene(), new THREE.Vector3(x, y, z))\r\n        break\r\n      case 1:\r\n        enemy = new EnemyTypeB(this.sceneManager.getScene(), new THREE.Vector3(x, y, z))\r\n        break\r\n      case 2:\r\n        enemy = new EnemyTypeC(this.sceneManager.getScene(), new THREE.Vector3(x, y, z))\r\n        break\r\n      default:\r\n        enemy = new EnemyTypeA(this.sceneManager.getScene(), new THREE.Vector3(x, y, z))\r\n    }\r\n\r\n    this.enemies.push(enemy)\r\n  }\r\n\r\n  private spawnObstacle(): void {\r\n    const x = THREE.MathUtils.randFloat(-10, 10)\r\n    const y = THREE.MathUtils.randFloat(-3, 3)\r\n    const z = -100\r\n    const type = Math.random() > 0.5 ? 'rock' : 'pillar'\r\n\r\n    const obstacle = new Obstacle(this.sceneManager.getScene(), new THREE.Vector3(x, y, z), type)\r\n    this.obstacles.push(obstacle)\r\n  }\r\n\r\n  private handleGameOver(): void {\r\n    this.gameState = 'gameover'\r\n    this.gameOverScreen.show(this.score, this.currentStage)\r\n  }\r\n\r\n  private restart(): void {\r\n    // Clear all entities\r\n    for (const bullet of this.bullets) {\r\n      bullet.destroy(this.sceneManager.getScene())\r\n    }\r\n    for (const enemy of this.enemies) {\r\n      enemy.destroy(this.sceneManager.getScene())\r\n    }\r\n    for (const obstacle of this.obstacles) {\r\n      obstacle.destroy(this.sceneManager.getScene())\r\n    }\r\n\r\n    this.bullets = []\r\n    this.enemies = []\r\n    this.obstacles = []\r\n\r\n    // Reset player (recreate)\r\n    this.player.getMesh().removeFromParent()\r\n    this.player = new Player(this.sceneManager.getScene())\r\n\r\n    // Reset game state\r\n    this.score = 0\r\n    this.currentStage = 1\r\n    this.gameState = 'playing'\r\n    this.enemySpawnTimer = 0\r\n    this.obstacleSpawnTimer = 0\r\n\r\n    // Update HUD\r\n    this.hud.updateHP(this.player.getHP())\r\n    this.hud.updateScore(this.score)\r\n    this.hud.updateStage(this.currentStage)\r\n\r\n    this.clock.getDelta() // Reset delta time\r\n  }\r\n}\r\n","import { Game } from './game/Game'\r\n\r\n// Initialize game when DOM is loaded\r\nwindow.addEventListener('DOMContentLoaded', () => {\r\n  new Game()\r\n})\r\n"],"names":["SceneManager","THREE.Scene","camera","THREE.PerspectiveCamera","renderer","THREE.WebGLRenderer","THREE.PCFSoftShadowMap","container","ambientLight","THREE.AmbientLight","directionalLight","THREE.DirectionalLight","Background","scene","geometry","THREE.PlaneGeometry","canvas","ctx","tileSize","y","x","texture","THREE.CanvasTexture","THREE.RepeatWrapping","material","THREE.MeshStandardMaterial","THREE.DoubleSide","ground","THREE.Mesh","THREE.BufferGeometry","vertices","i","THREE.MathUtils","THREE.Float32BufferAttribute","THREE.PointsMaterial","THREE.Points","deltaTime","InputManager","touch","state","Player","THREE.ConeGeometry","mesh","input","targetX","targetY","amount","Bullet","position","THREE.SphereGeometry","THREE.MeshBasicMaterial","THREE.Material","Enemy","hp","EnemyTypeA","THREE.TetrahedronGeometry","playerPos","EnemyTypeB","THREE.OctahedronGeometry","amplitude","frequency","EnemyTypeC","THREE.DodecahedronGeometry","zigzagOffset","Obstacle","type","THREE.CylinderGeometry","CollisionDetector","pos1","radius1","pos2","radius2","bullets","enemies","bullet","enemy","obstacles","obstacle","HUD","stage","score","hud","GameOverScreen","onRetry","Game","THREE.Clock","gameOver","z","enemyType","THREE.Vector3"],"mappings":"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"}